<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cultivos</title>
    <!-- Favicons -->
    <link rel="stylesheet" href="static/css/stlye_presente.css">
    <!-- LEAFLET -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet-src.js" integrity="sha512-GBlVVqOnLycKN+z49gDABUY6RxEQjOw/GHFbpboxpTxAPJQ78C6pAjT08S/1fT9pWOy9PeyDqipC7cBwrfX2cA==" crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.css"/>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.0/chroma.min.js"></script>
    <!-- Bootstrap JS -->
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <!-- jQuery Custom Scroller CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="https://unpkg.com/proj4"></script>
    <script src="https://unpkg.com/georaster"></script>
    <script src="https://unpkg.com/georaster-layer-for-leaflet/georaster-layer-for-leaflet.browserify.min.js"></script>
</head>
<style>
    .foliumtooltip {
        background-color: grey; color: white;
    }
    .foliumtooltip table{
        margin: auto;
    }
    .foliumtooltip tr{
        text-align: left;
    }
    .foliumtooltip th{
        padding: 2px; padding-right: 8px;
    }
</style>


<style>
    .foliumtooltip {
        background-color: grey; color: white;
    }
    .foliumtooltip table{
        margin: auto;
    }
    .foliumtooltip tr{
        text-align: left;
    }
    .foliumtooltip th{
        padding: 2px; padding-right: 8px;
    }
    .legend {
        line-height: 20px;
        color: #232323;
        border-radius: 5px;
        background-color: rgba(222,222,222,0.6);

    }
    .legend i {
        width: 20px;
        height: 18px;
        float: left;
        margin-right: 8px;
        margin-bottom: 2px;
        opacity: 0.7;
    }
</style>


<body>
<div id="content">

</div>
<script src="https://unpkg.com/esri-leaflet@3.0.8/dist/esri-leaflet.js"
        integrity="sha512-E0DKVahIg0p1UHR2Kf9NX7x7TUewJb30mxkxEm2qOYTVJObgsAGpEol9F6iK6oefCbkJiA4/i6fnTHzM6H1kEA=="
        crossorigin=""></script>
<script type="text/javascript">
    function onEachFeature(feature, layer) {
        layer.on({});
    }

    var map = L.map('content', { zoomControl:false, minZoom: 4, zoomSnap: 0.25 }).setView([-38.86, -64.33], 4);
    new L.Control.Zoom({ position: 'topright' }).addTo(map);

    var esri= L.esri.basemapLayer('Imagery').addTo(map);

    var locate_control_e5f44ad5fae447d4ab47540d30978b01 = L.control.locate(
        {position:"topright"}
    ).addTo(map);
    var all = L.layerGroup().addTo(map)
    var layerGroup = L.layerGroup();
    var legend = L.control({position: 'bottomright'});
    var ign= L.tileLayer("https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/{z}/{x}/{-y}.png",
        {"attribution": " \u003ca href=\"http://www.ign.gob.ar\" target=\"_blank\"\u003eInstituto Geogr\u00e1fico Nacional\u003c/a\u003e + \u003ca href=\"http://www.osm.org/copyright\" target=\"_blank\"\u003eOpenStreetMap\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "z-index":900, "minZoom": 4, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
    );
    var overlayMaps = {
        "Junin": layerGroup


    };
    var baseMaps = {
        "IGN": ign,
        "Satelite":esri,
    };
    var control_capas=    L.control.layers(baseMaps, overlayMaps,{
        position: 'topright', // 'topleft', 'bottomleft', 'bottomright'
        collapsed: false // true
    }).addTo(map);
    var url_to_geotiff_file = ("juninbyte.tif")

    fetch(url_to_geotiff_file)
        .then(response => response.arrayBuffer())
        .then(arrayBuffer => {
            parseGeoraster(arrayBuffer).then(georaster => {
                var junin = new GeoRasterLayer({
                    georaster: georaster,
                    opacity: 0.9,
                    pixelValuesToColorFn: function (pixelValues) {
                        var pixelValue = pixelValues[0]; // there's just one band in this raster


                        if ((isNaN(pixelValue))) return null;
                        if (pixelValue<1) return null;

                        function getColor2(d) {
                            return d <2 ? '#bdc581' :
                                d <3? '#f3e8a1' :
                                    d<4 ? '#5288a9':
                                        d <5 ? '#fea458' :
                                            d <6 ? '#55e6c1' :
                                                d <7 ? '#eaea59' :
                                                    d <8 ? '#b33771' :
                                                        d <9 ? '#499445' :
                                                            d <10 ? '#1a6c15' :
                                                                d <11? '#c0c015' :
                                                                    d <12? '#182c61' :
                                                                        d <13? '#b6f6f6' :

                                                                            '#8c240c';

                        }
                        var color = getColor2(pixelValue);


                        return color;
                    },

                    resolution: 256
                });

                junin.addTo(layerGroup);
                map.addLayer(layerGroup);
                junin.bringToFront();

                function getColor(d) {
                    return d == "Pasturas" ? '#bdc581' :
                           d == "Barbechos y rastrojos" ? '#f3e8a1' :
                               d== "Campos naturales" ? '#5288a9':
                               d == "Girasol" ? '#fea458' :
                                    d == "Maní" ? '#55e6c1' :
                                d == "Maíz 1" ? '#eaea59' :
                                        d == "Sorgo" ? '#b33771' :
                                            d == "Soja 1" ? '#499445' :
                                                d == "Soja 2" ? '#1a6c15' :
                                                    d == "Maíz 2" ? '#c0c015' :
                                                d == "Bajos" ? '#182c61' :
                                                    d == "Montes" ? '#b6f6f6' :

                             '#8c240c';

                }
                legend.onAdd = function (map) {

                    var div = L.DomUtil.create('div', 'info legend'),
                        grades = [ "Soja 1","Soja 2","Maíz 1","Maíz 2","Sorgo","Maní","Girasol","Pasturas", "Barbechos y rastrojos","Campos naturales","Montes","Bajos"],
                        labels = ['<strong></strong>']
                    title = ["Cultivos"];

                    // loop through our density intervals and generate a label with a colored square for each interval
                    for (var i = 0; i < grades.length; i++) {
                        div.innerHTML +=
                            '<i style="background:' + getColor(grades[i]) + '"></i> ' +
                            grades[i] + (grades[i + 1] ?  '<br>' : ' ');
                    }

                    return div;
                };

                legend.addTo(map);
            })
        });
</script>
</body>
</html>
